import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Documentation/Friday Async" />

# @friday/Async
`@fridy/async`是`friday`的异步数据模块，有下方api，具体api使用示例可以查看:
<a class="link-item" href="/?path=/story/overview-数据流--page">
    <span>数据流使用示例</span>
</a>

## <code> setAixosInstance(httpInstance)</code>
<code>setAixosInstance</code>接收一个httpInstance，为了保证
<code>dispatchAsync</code> 和 <code>useRequest</code> 引用的httpInstance相同，需要设置dispatchAsync的httpInstance

## <code>getAixosInstance()</code>
获取`setAixosInstance`注入的http实例

## <code>createGetApi<Params, Data>(axiosConfig)</code>
配置一个get类型的api。


## <code>createPostApi<Params, Data>(axiosConfig): DispatchAsyncReturn<Params, Data></code>
配置一个post类型的api。

## <code>dispatchAsync(service: createGetApi |createPostApi )</code>
<p><code>dispatchAsync</code> 支持分发createGetApi | createPostApi，返回一个promise </p>
<p><code>Response</code> 返回一个DispatchAsyncReturn 类型</p>


## `useRequest(api, options)`
`useRequest`是一个`get`请求器，封装了丰富的场景功能，注意⚠️：`useRequest`只接收`createGetApi`生成的api

使用方法请看数据流模块文档。

## <code>httpInstance = httpAxios(AxiosRequestConfig, hooks)</code>
httpAxios生成一个axios 实例

httpAxios 包含两个参数：
- `AxiosRequestConfig` 为axios 配置
- hooks 如下，axios分发返回过程中的一些钩子：

```css dark
interface AxiosHooks {
	requestSuccessHook?: (config: AxiosRequestConfig) => AxiosRequestConfig
	requestErrorHooks?: (error: any) => Promise<any>
	responseSuccessHooks?: (response: AxiosResponse<any>) => AxiosResponse<any>
	responseErrorHooks?: (error: any) => Promise<any>
}

```

## <code>middleware = request_middleware(httpInstance， requestConfigs) </code>
我们提供了`request_middleware为useRequest`的全局注入器，可以通过中间件来注入全局的`useRequest`配置。和`http`实例





